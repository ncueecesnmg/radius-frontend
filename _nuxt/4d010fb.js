(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{372:function(e,r,t){var content=t(395);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(17).default)("1b7833da",content,!0,{sourceMap:!1})},394:function(e,r,t){"use strict";t(372)},395:function(e,r,t){var n=t(16)(!1);n.push([e.i,".v-speed-dial{position:absolute}.v-btn--floating{position:relative}",""]),e.exports=n},442:function(e,r,t){"use strict";t.r(r);var n,o=t(27),l=(t(91),t(393)),c={data:function(){return{icons:{mdiAccountRemove:l.a,mdiPencil:l.c,mdiDelete:l.b},speedDial:{direction:"top",fab:!1,fling:!1,hover:!1,tabs:null,top:!1,right:!0,bottom:!0,left:!1,transition:"slide-y-reverse-transition"},form:{username:"",password:"",expiry:{hour:0,minute:30,second:0},error:!1},loginForm:{username:"",password:"",error:!1},users:{},dialog:!1,loginDialog:!1}},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function r(){var t,n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.$api,r.prev=1,r.next=4,t.get("/user");case 4:return n=r.sent,r.next=7,n.data;case 7:return o=r.sent,r.abrupt("return",{users:o});case 11:r.prev=11,r.t0=r.catch(1);case 13:case"end":return r.stop()}}),r,null,[[1,11]])})))()},methods:{addUser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=1e3*(3600*e.form.expiry.hour+60*e.form.expiry.minute+e.form.expiry.second),r.prev=1,r.next=4,e.$api.post("/user",{username:e.form.username,password:e.form.password,options:{expiry:t}});case 4:e.dialog=!1,e.form.error=!1,e.$nuxt.refresh(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),e.form.error=!0;case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},isLogined:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$api.get("/me");case 3:return t=r.sent,r.abrupt("return",t&&200===t.status);case 7:return r.prev=7,r.t0=r.catch(0),r.abrupt("return",!1);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},login:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$api.post("/login",{username:e.loginForm.username,password:e.loginForm.password});case 3:e.loginForm.error=!1,e.loginDialog=!1,e.$nuxt.refresh(),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),e.loginForm.error=!0;case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},deleteUser:function(e){var r=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.$api.delete("/user",{data:{username:e}});case 2:r.$nuxt.refresh();case 3:case"end":return t.stop()}}),t)})))()}},computed:{isFormValid:function(){return this.form.username&&this.form.password},isLoginDialogValid:function(){return this.loginForm.username&&this.loginForm.password}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.isLogined();case 2:if(r.sent){r.next=4;break}e.loginDialog=!0;case 4:case"end":return r.stop()}}),r)})))()},watch:{loginDialog:(n=Object(o.a)(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=5;break}return e.next=3,this.isLogined();case 3:if(e.sent){e.next=5;break}this.loginDialog=!0;case 5:case"end":return e.stop()}}),e,this)}))),function(e,r){return n.apply(this,arguments)})}},d=(t(394),t(85)),v=t(129),m=t.n(v),f=t(434),x=t(178),_=t(375),h=t(371),w=t(435),k=t(369),y=t(441),D=t(436),V=t(161),F=t(437),R=t(438),$=t(366),C=t(439),j=t(440),component=Object(d.a)(c,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-container",{attrs:{"fill-height":""}},[t("v-row",{attrs:{justify:"center",align:"center"}},[t("v-col",{attrs:{cols:"12",xs:"12",sm:"10",md:"6"}},[t("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("使用者名稱")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("過期時間")])])]),e._v(" "),t("tbody",e._l(e.users,(function(r,n){return t("tr",{key:n},[t("td",[e._v(e._s(n))]),e._v(" "),t("td",[e._v(e._s(new Date(r.expiry)))]),e._v(" "),t("td",[t("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(r){return e.deleteUser(n)}}},[t("v-icon",[e._v(e._s(e.icons.mdiDelete))])],1)],1)])})),0)]},proxy:!0}])})],1),e._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(r){e.dialog=r},expression:"dialog"}},[t("v-card",[e.form.error?t("v-alert",{attrs:{icon:e.icons.mdiAccountRemove,type:"error",text:""}},[e._v("新增失敗")]):e._e(),e._v(" "),t("v-card-title",[t("span",{staticClass:"text-h5"},[e._v("新增使用者")])]),e._v(" "),t("v-form",{ref:"form",on:{submit:function(r){return r.preventDefault(),e.submit.apply(null,arguments)}}},[t("v-card-text",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"使用者名稱*",required:""},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"密碼*",type:"password",required:""},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-text-field",{attrs:{label:"過期時間 (時)",type:"number"},model:{value:e.form.expiry.hour,callback:function(r){e.$set(e.form.expiry,"hour",e._n(r))},expression:"form.expiry.hour"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-text-field",{attrs:{label:"過期時間 (分)",type:"number"},model:{value:e.form.expiry.minute,callback:function(r){e.$set(e.form.expiry,"minute",e._n(r))},expression:"form.expiry.minute"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-text-field",{attrs:{label:"過期時間 (秒)",type:"number"},model:{value:e.form.expiry.second,callback:function(r){e.$set(e.form.expiry,"second",e._n(r))},expression:"form.expiry.second"}})],1)],1)],1),e._v(" "),t("small",[e._v("*為必填")])],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(r){e.dialog=!1}}},[e._v("\n                            關閉\n                        ")]),e._v(" "),t("v-btn",{attrs:{disabled:!e.isFormValid,color:"blue darken-1",text:""},on:{click:function(r){return e.addUser()}}},[e._v("\n                            新增\n                        ")])],1)],1)],1)],1),e._v(" "),t("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.loginDialog,callback:function(r){e.loginDialog=r},expression:"loginDialog"}},[t("v-card",[e.loginForm.error?t("v-alert",{attrs:{icon:e.icons.mdiAccountRemove,type:"error",text:""}},[e._v("登入失敗")]):e._e(),e._v(" "),t("v-card-title",[t("span",{staticClass:"text-h5"},[e._v("登入")])]),e._v(" "),t("v-form",{ref:"loginForm",on:{submit:function(r){return r.preventDefault(),e.submit.apply(null,arguments)}}},[t("v-card-text",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"使用者名稱*",required:""},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{label:"密碼*",type:"password",required:""},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1)],1)],1)],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{disabled:!e.isLoginDialogValid,color:"blue darken-1",text:""},on:{click:function(r){return e.login()}}},[e._v("\n                            登入\n                        ")])],1)],1)],1)],1)],1),e._v(" "),t("v-speed-dial",{attrs:{top:e.speedDial.top,bottom:e.speedDial.bottom,right:e.speedDial.right,left:e.speedDial.left,direction:e.speedDial.direction,"open-on-hover":e.speedDial.hover,transition:e.speedDial.transition},scopedSlots:e._u([{key:"activator",fn:function(){return[t("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.speedDial.fab,callback:function(r){e.$set(e.speedDial,"fab",r)},expression:"speedDial.fab"}},[e.speedDial.fab?t("v-icon",[e._v(" mdi-close ")]):t("v-icon",[e._v(" mdi-plus-circle ")])],1)]},proxy:!0}]),model:{value:e.speedDial.fab,callback:function(r){e.$set(e.speedDial,"fab",r)},expression:"speedDial.fab"}},[e._v(" "),t("v-btn",{attrs:{fab:"",dark:"",small:"",color:"indigo"},on:{click:function(r){e.dialog=!0}}},[t("v-icon",[e._v("mdi-plus")])],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports;m()(component,{VAlert:f.a,VBtn:x.a,VCard:_.a,VCardActions:h.a,VCardText:h.b,VCardTitle:h.c,VCol:w.a,VContainer:k.a,VDialog:y.a,VForm:D.a,VIcon:V.a,VRow:F.a,VSimpleTable:R.a,VSpacer:$.a,VSpeedDial:C.a,VTextField:j.a})}}]);