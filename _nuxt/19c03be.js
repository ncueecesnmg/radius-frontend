(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{440:function(e,t,r){"use strict";r.r(t);var n=r(24),o=(r(83),r(393)),l=r(392),c=r.n(l);function d(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*n));return t}var m,v={data:function(){return{icons:{mdiAccountRemove:o.a,mdiPencil:o.c,mdiDelete:o.b,mdiPlusBoxOutline:o.e,mdiPlusBoxMultipleOutline:o.d},speedDial:{direction:"top",fab:!1,fling:!1,hover:!1,tabs:null,top:!1,right:!0,bottom:!0,left:!1,transition:"slide-y-reverse-transition"},form:{username:"",password:"",expiry:{hour:0,minute:30,second:0},error:!1},multiAddForm:{count:1,expiry:{hour:0,minute:30,second:0},error:!1},loginForm:{username:"",password:"",error:!1},users:{},singleAddUserDialog:!1,multiAddUserDialog:!1,loginDialog:!1}},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$api,t.prev=1,t.next=4,r.get("/user");case 4:return n=t.sent,t.next=7,n.data;case 7:return o=t.sent,t.abrupt("return",{users:o});case 11:t.prev=11,t.t0=t.catch(1);case 13:case"end":return t.stop()}}),t,null,[[1,11]])})))()},methods:{addUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=1e3*(3600*e.form.expiry.hour+60*e.form.expiry.minute+e.form.expiry.second),t.prev=1,t.next=4,e.$api.post("/user",{username:e.form.username,password:e.form.password,options:{expiry:r}});case 4:e.dialog=!1,e.form.error=!1,e.$nuxt.refresh(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.form.error=!0;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},multiAddUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,i,o,l,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},n=1e3*(3600*e.multiAddForm.expiry.hour+60*e.multiAddForm.expiry.minute+e.multiAddForm.expiry.second),i=0;case 3:if(!(i<e.multiAddForm.count)){t.next=19;break}return o=d(7),l=d(7),t.prev=6,t.next=9,e.$api.post("/user",{username:o,password:l,options:{expiry:n}});case 9:r[o]=l,t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(6),i-=1,t.abrupt("continue",16);case 16:i++,t.next=3;break;case 19:m=new Blob([JSON.stringify(r,null,2)],{type:"text/plain;charset=utf-8"}),c.a.saveAs(m,"batchAdd.json"),e.multiAddUserDialog=!1,e.$nuxt.refresh();case 23:case"end":return t.stop()}}),t,null,[[6,12]])})))()},isLogined:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.get("/me");case 3:return r=t.sent,t.abrupt("return",r&&200===r.status);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},login:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api.post("/login",{username:e.loginForm.username,password:e.loginForm.password});case 3:e.loginForm.error=!1,e.loginDialog=!1,e.$nuxt.refresh(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.loginForm.error=!0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteUser:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$api.delete("/user",{data:{username:e}});case 2:t.$nuxt.refresh();case 3:case"end":return r.stop()}}),r)})))()}},computed:{isFormValid:function(){return this.form.username&&this.form.password},isLoginDialogValid:function(){return this.loginForm.username&&this.loginForm.password},isMultiAddDialogValid:function(){return this.multiAddForm.count>0}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.isLogined();case 2:if(t.sent){t.next=4;break}e.loginDialog=!0;case 4:case"end":return t.stop()}}),t)})))()},watch:{loginDialog:(m=Object(n.a)(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,this.isLogined();case 3:if(e.sent){e.next=5;break}this.loginDialog=!0;case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})}},f=r(86),x=r(129),_=r.n(x),h=r(432),y=r(178),k=r(374),w=r(372),D=r(433),A=r(370),F=r(439),$=r(434),V=r(161),R=r(435),U=r(436),O=r(367),C=r(437),j=r(438),component=Object(f.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"fill-height":""}},[r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",xs:"12",sm:"10",md:"6"}},[r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v("使用者名稱")]),e._v(" "),r("th",{staticClass:"text-left"},[e._v("過期時間")])])]),e._v(" "),r("tbody",e._l(e.users,(function(t,n){return r("tr",{key:n},[r("td",[e._v(e._s(n))]),e._v(" "),r("td",[e._v(e._s(new Date(t.expiry)))]),e._v(" "),r("td",[r("v-btn",{attrs:{icon:"","x-small":""},on:{click:function(t){return e.deleteUser(n)}}},[r("v-icon",[e._v(e._s(e.icons.mdiDelete))])],1)],1)])})),0)]},proxy:!0}])})],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.singleAddUserDialog,callback:function(t){e.singleAddUserDialog=t},expression:"singleAddUserDialog"}},[r("v-card",[e.form.error?r("v-alert",{attrs:{icon:e.icons.mdiAccountRemove,type:"error",text:""}},[e._v("新增失敗")]):e._e(),e._v(" "),r("v-card-title",[r("span",{staticClass:"text-h5"},[e._v("新增使用者")])]),e._v(" "),r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"使用者名稱*",required:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"密碼*",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"過期時間 (時)",type:"number",min:"0"},model:{value:e.form.expiry.hour,callback:function(t){e.$set(e.form.expiry,"hour",e._n(t))},expression:"form.expiry.hour"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"過期時間 (分)",type:"number",min:"0"},model:{value:e.form.expiry.minute,callback:function(t){e.$set(e.form.expiry,"minute",e._n(t))},expression:"form.expiry.minute"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"過期時間 (秒)",type:"number",min:"0"},model:{value:e.form.expiry.second,callback:function(t){e.$set(e.form.expiry,"second",e._n(t))},expression:"form.expiry.second"}})],1)],1)],1),e._v(" "),r("small",[e._v("*為必填")])],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.singleAddUserDialog=!1}}},[e._v("\n                            關閉\n                        ")]),e._v(" "),r("v-btn",{attrs:{disabled:!e.isFormValid,color:"blue darken-1",text:""},on:{click:function(t){return e.addUser()}}},[e._v("\n                            新增\n                        ")])],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.multiAddUserDialog,callback:function(t){e.multiAddUserDialog=t},expression:"multiAddUserDialog"}},[r("v-card",[e.multiAddForm.error?r("v-alert",{attrs:{icon:e.icons.mdiAccountRemove,type:"error",text:""}},[e._v("新增失敗")]):e._e(),e._v(" "),r("v-card-title",[r("span",{staticClass:"text-h5"},[e._v("批次新增使用者")])]),e._v(" "),r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"使用者數量*",required:"",type:"number",min:"1"},model:{value:e.multiAddForm.count,callback:function(t){e.$set(e.multiAddForm,"count",e._n(t))},expression:"multiAddForm.count"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"過期時間 (時)",type:"number",min:"0"},model:{value:e.multiAddForm.expiry.hour,callback:function(t){e.$set(e.multiAddForm.expiry,"hour",e._n(t))},expression:"\n                                            multiAddForm.expiry.hour\n                                        "}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"過期時間 (分)",type:"number",min:"0"},model:{value:e.multiAddForm.expiry.minute,callback:function(t){e.$set(e.multiAddForm.expiry,"minute",e._n(t))},expression:"\n                                            multiAddForm.expiry.minute\n                                        "}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4"}},[r("v-text-field",{attrs:{label:"過期時間 (秒)",type:"number",min:"0"},model:{value:e.multiAddForm.expiry.second,callback:function(t){e.$set(e.multiAddForm.expiry,"second",e._n(t))},expression:"\n                                            multiAddForm.expiry.second\n                                        "}})],1)],1)],1),e._v(" "),r("small",[e._v("*為必填")])],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.multiAddUserDialog=!1}}},[e._v("\n                            關閉\n                        ")]),e._v(" "),r("v-btn",{attrs:{disabled:!e.isMultiAddDialogValid,color:"blue darken-1",text:""},on:{click:function(t){return e.multiAddUser()}}},[e._v("\n                            新增\n                        ")])],1)],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.loginDialog,callback:function(t){e.loginDialog=t},expression:"loginDialog"}},[r("v-card",[e.loginForm.error?r("v-alert",{attrs:{icon:e.icons.mdiAccountRemove,type:"error",text:""}},[e._v("登入失敗")]):e._e(),e._v(" "),r("v-card-title",[r("span",{staticClass:"text-h5"},[e._v("登入")])]),e._v(" "),r("v-form",{ref:"loginForm",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"使用者名稱*",required:""},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"密碼*",type:"password",required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:!e.isLoginDialogValid,color:"blue darken-1",text:""},on:{click:function(t){return e.login()}}},[e._v("\n                            登入\n                        ")])],1)],1)],1)],1)],1),e._v(" "),r("v-speed-dial",{attrs:{top:e.speedDial.top,bottom:e.speedDial.bottom,right:e.speedDial.right,left:e.speedDial.left,direction:e.speedDial.direction,"open-on-hover":e.speedDial.hover,transition:e.speedDial.transition,absolute:""},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.speedDial.fab,callback:function(t){e.$set(e.speedDial,"fab",t)},expression:"speedDial.fab"}},[e.speedDial.fab?r("v-icon",[e._v(" mdi-close ")]):r("v-icon",[e._v(" mdi-account-circle ")])],1)]},proxy:!0}]),model:{value:e.speedDial.fab,callback:function(t){e.$set(e.speedDial,"fab",t)},expression:"speedDial.fab"}},[e._v(" "),r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"indigo"},on:{click:function(t){e.singleAddUserDialog=!0}}},[r("v-icon",[e._v(" "+e._s(e.icons.mdiPlusBoxOutline))])],1),e._v(" "),r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"indigo"},on:{click:function(t){e.multiAddUserDialog=!0}}},[r("v-icon",[e._v(" "+e._s(e.icons.mdiPlusBoxMultipleOutline))])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;_()(component,{VAlert:h.a,VBtn:y.a,VCard:k.a,VCardActions:w.a,VCardText:w.b,VCardTitle:w.c,VCol:D.a,VContainer:A.a,VDialog:F.a,VForm:$.a,VIcon:V.a,VRow:R.a,VSimpleTable:U.a,VSpacer:O.a,VSpeedDial:C.a,VTextField:j.a})}}]);